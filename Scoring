
# motor_scoring.py

def calcular_scoring(datos_cliente: dict) -> dict:
    """
    Calcula el puntaje de riesgo y devuelve la decisión.
    datos_cliente debe contener: ingreso, deuda, edad, historial
    """
    puntaje = 50
    motivo = []

    # Regla 1: relación deuda/ingreso
    if datos_cliente["deuda"] > 0.5 * datos_cliente["ingreso"]:
        puntaje -= 30
        motivo.append("Deuda alta respecto a ingresos")

    # Regla 2: edad mínima
    if datos_cliente["edad"] < 21:
        puntaje -= 40
        motivo.append("Edad menor a 21 años")

    # Regla 3: historial crediticio
    historial = datos_cliente["historial"].lower()
    if historial == "bueno":
        puntaje += 30
    elif historial == "regular":
        puntaje += 10
    elif historial == "malo":
        puntaje -= 20
        motivo.append("Historial crediticio malo")

    # Decisión
    decision = "Aprobado" if puntaje >= 70 else "Rechazado"

    return {
        "puntaje": puntaje,
        "decision": decision,
        "motivo": motivo if decision == "Rechazado" else ["Cumple requisitos"]
    }


# Ejemplo de uso rápido
if __name__ == "__main__":
    cliente = {"ingreso": 1000000, "deuda": 400000, "edad": 25, "historial": "regular"}
    resultado = calcular_scoring(cliente)
    print(resultado)
